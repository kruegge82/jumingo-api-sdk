<?php
/**
 * ShipmentApi
 * PHP version 8.1
 *
 * @category Class
 * @package  kruegge82\jumingo
 * @author   OpenAPI Generator team
 * @link     https://openapi-generator.tech
 */

/**
 * JUMINGO API Reference
 *
 * ## About  With the JUMINGO shipping API you can import your shipments into your JUMINGO account from any source. The functionalities of the API include creating and updating shipment drafts, fetching suitable shipment rates for a given shipment and purchasing shipping labels. Furthermore, you can retrieve tracking data and fetch shipping labels and documents for all your purchased shipments.   The current main purpose of the API is to connect your account to e-commerce systems and marketplaces.  ## General The API is organized around REST. Our API has resource-oriented URLs and uses HTTP response codes to indicate API errors. We use built-in HTTP features, like HTTP authentication and HTTP verbs. All API requests must be made over HTTPS. Calls made over plain HTTP will return errors. Request data is passed to the API as JSON objects and JSON is also returned by all API responses, including errors, although our API SDKs convert requests and responses to appropriate language-specific objects.  Best practice usage of the API and business logic is described in the supplementary [integration guide](https://www.jumingo.com/cms/JUMiNGO_API-integration-guide.pdf \"JUMiNGO API Integration Guide\").  ## Base URL The base URL for all calls is: `https://api.jumingo.com/v1`  ## HTTP status codes HTTP response codes in the `2xx` range indicate success. Codes in the `4xx` range indicate an error on the client side (e.g. a required parameter is missing). Codes in the `5xx` range indicate an error with our servers. Each error should provide an error code and an error message with further information.  HTTP status code | Description ---------------- | ----------- 200, 201, 204 - OK | Everything worked. 400 - Bad Request | The request was unacceptable, often due to missing a required parameter or a validation error. 401 - Unauthorized | No valid API key has been provided or your account is disabled. 403 - Forbidden | You are not allowed to talk to this endpoint. This can either be due to a wrong authentication or when you’re trying to reach an endpoint that your account isn’t allowed to access. 404 - Not Found | The requested resource doesn’t exist. 500, 502, 503, 504 - Server Errors | Something went wrong on our side. Please contact our support if you receive this error.  ## Authentication All API requests requires authentication. Unauthorized calls will return errors.  Authenticate by including your API key in the `X-AUTH-TOKEN` HTTP header of each API call, e.g.:  `X-AUTH-TOKEN: INSERT_YOUR_API_KEY`  You can find your API key in your JUMINGO user account. You can get access to the JUMiNGO customer API by enabling it in your [user account](https://www.jumingo.com/de-de/users/connections/create/8). After activation, you will get your personal API key.  ## Date/Time Format All values of type `string <date-time>` are defined in a specific [RFC 3339](https://tools.ietf.org/html/rfc3339#section-5.6) format and must also be formatted accordingly for requests.  The format is: YYYY-MM-DD hh:mm:ss  Example: 2018-07-26 15:54:13  All dates and times are specified in UTC (Coordinated Universal Time).
 *
 * The version of the OpenAPI document: 1.0.4
 * Contact: connections@jumingo.com
 * Generated by: https://openapi-generator.tech
 * Generator version: 7.20.0
 */

/**
 * NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).
 * https://openapi-generator.tech
 * Do not edit the class manually.
 */

namespace kruegge82\jumingo\Api;

use GuzzleHttp\Client;
use GuzzleHttp\ClientInterface;
use GuzzleHttp\Exception\ConnectException;
use GuzzleHttp\Exception\RequestException;
use GuzzleHttp\Psr7\MultipartStream;
use GuzzleHttp\Psr7\Request;
use GuzzleHttp\RequestOptions;
use Psr\Http\Message\RequestInterface;
use Psr\Http\Message\ResponseInterface;
use kruegge82\jumingo\ApiException;
use kruegge82\jumingo\Configuration;
use kruegge82\jumingo\FormDataProcessor;
use kruegge82\jumingo\HeaderSelector;
use kruegge82\jumingo\ObjectSerializer;

/**
 * ShipmentApi Class Doc Comment
 *
 * @category Class
 * @package  kruegge82\jumingo
 * @author   OpenAPI Generator team
 * @link     https://openapi-generator.tech
 */
class ShipmentApi
{
    /**
     * @var ClientInterface
     */
    protected $client;

    /**
     * @var Configuration
     */
    protected $config;

    /**
     * @var HeaderSelector
     */
    protected $headerSelector;

    /**
     * @var int Host index
     */
    protected $hostIndex;

    /** @var string[] $contentTypes **/
    public const contentTypes = [
        'createShipment' => [
            'application/json',
        ],
        'deleteShipment' => [
            'application/json',
        ],
        'deleteShipmentFile' => [
            'application/json',
        ],
        'getShipment' => [
            'application/json',
        ],
        'getShipments' => [
            'application/json',
        ],
        'patchV1ShipmentItem' => [
            'application/merge-patch+json',
        ],
        'putShipment' => [
            'application/json',
        ],
        'updateShipmentRateCheapestTariffV1' => [
            'application/json',
        ],
        'uploadShipmentFile' => [
            'multipart/form-data',
        ],
    ];

    /**
     * @param ClientInterface $client
     * @param Configuration   $config
     * @param HeaderSelector  $selector
     * @param int             $hostIndex (Optional) host index to select the list of hosts if defined in the OpenAPI spec
     */
    public function __construct(
        ?ClientInterface $client = null,
        ?Configuration $config = null,
        ?HeaderSelector $selector = null,
        int $hostIndex = 0
    ) {
        $this->client = $client ?: new Client();
        $this->config = $config ?: Configuration::getDefaultConfiguration();
        $this->headerSelector = $selector ?: new HeaderSelector();
        $this->hostIndex = $hostIndex;
    }

    /**
     * Set the host index
     *
     * @param int $hostIndex Host index (required)
     */
    public function setHostIndex($hostIndex): void
    {
        $this->hostIndex = $hostIndex;
    }

    /**
     * Get the host index
     *
     * @return int Host index
     */
    public function getHostIndex()
    {
        return $this->hostIndex;
    }

    /**
     * @return Configuration
     */
    public function getConfig()
    {
        return $this->config;
    }

    /**
     * Operation createShipment
     *
     * Create a Shipment
     *
     * @param  \kruegge82\jumingo\Model\CreateShipment $body body (required)
     * @param  string $contentType The value for the Content-Type header. Check self::contentTypes['createShipment'] to see the possible values for this operation
     *
     * @throws \kruegge82\jumingo\ApiException on non-2xx response or if the response body is not in the expected format
     * @throws \InvalidArgumentException
     * @return \kruegge82\jumingo\Model\CreateShipmentResult|\kruegge82\jumingo\Model\ErrorResponse
     */
    public function createShipment($body, string $contentType = self::contentTypes['createShipment'][0])
    {
        list($response) = $this->createShipmentWithHttpInfo($body, $contentType);
        return $response;
    }

    /**
     * Operation createShipmentWithHttpInfo
     *
     * Create a Shipment
     *
     * @param  \kruegge82\jumingo\Model\CreateShipment $body (required)
     * @param  string $contentType The value for the Content-Type header. Check self::contentTypes['createShipment'] to see the possible values for this operation
     *
     * @throws \kruegge82\jumingo\ApiException on non-2xx response or if the response body is not in the expected format
     * @throws \InvalidArgumentException
     * @return array of \kruegge82\jumingo\Model\CreateShipmentResult|\kruegge82\jumingo\Model\ErrorResponse, HTTP status code, HTTP response headers (array of strings)
     */
    public function createShipmentWithHttpInfo($body, string $contentType = self::contentTypes['createShipment'][0])
    {
        $request = $this->createShipmentRequest($body, $contentType);

        try {
            $options = $this->createHttpClientOption();
            try {
                $response = $this->client->send($request, $options);
            } catch (RequestException $e) {
                throw new ApiException(
                    "[{$e->getCode()}] {$e->getMessage()}",
                    (int) $e->getCode(),
                    $e->getResponse() ? $e->getResponse()->getHeaders() : null,
                    $e->getResponse() ? (string) $e->getResponse()->getBody() : null
                );
            } catch (ConnectException $e) {
                throw new ApiException(
                    "[{$e->getCode()}] {$e->getMessage()}",
                    (int) $e->getCode(),
                    null,
                    null
                );
            }

            $statusCode = $response->getStatusCode();


            switch($statusCode) {
                case 200:
                    return $this->handleResponseWithDataType(
                        '\kruegge82\jumingo\Model\CreateShipmentResult',
                        $request,
                        $response,
                    );
                case 400:
                    return $this->handleResponseWithDataType(
                        '\kruegge82\jumingo\Model\ErrorResponse',
                        $request,
                        $response,
                    );
            }

            

            if ($statusCode < 200 || $statusCode > 299) {
                throw new ApiException(
                    sprintf(
                        '[%d] Error connecting to the API (%s)',
                        $statusCode,
                        (string) $request->getUri()
                    ),
                    $statusCode,
                    $response->getHeaders(),
                    (string) $response->getBody()
                );
            }

            return $this->handleResponseWithDataType(
                '\kruegge82\jumingo\Model\CreateShipmentResult',
                $request,
                $response,
            );
        } catch (ApiException $e) {
            switch ($e->getCode()) {
                case 200:
                    $data = ObjectSerializer::deserialize(
                        $e->getResponseBody(),
                        '\kruegge82\jumingo\Model\CreateShipmentResult',
                        $e->getResponseHeaders()
                    );
                    $e->setResponseObject($data);
                    throw $e;
                case 400:
                    $data = ObjectSerializer::deserialize(
                        $e->getResponseBody(),
                        '\kruegge82\jumingo\Model\ErrorResponse',
                        $e->getResponseHeaders()
                    );
                    $e->setResponseObject($data);
                    throw $e;
            }
        

            throw $e;
        }
    }

    /**
     * Operation createShipmentAsync
     *
     * Create a Shipment
     *
     * @param  \kruegge82\jumingo\Model\CreateShipment $body (required)
     * @param  string $contentType The value for the Content-Type header. Check self::contentTypes['createShipment'] to see the possible values for this operation
     *
     * @throws \InvalidArgumentException
     * @return \GuzzleHttp\Promise\PromiseInterface
     */
    public function createShipmentAsync($body, string $contentType = self::contentTypes['createShipment'][0])
    {
        return $this->createShipmentAsyncWithHttpInfo($body, $contentType)
            ->then(
                function ($response) {
                    return $response[0];
                }
            );
    }

    /**
     * Operation createShipmentAsyncWithHttpInfo
     *
     * Create a Shipment
     *
     * @param  \kruegge82\jumingo\Model\CreateShipment $body (required)
     * @param  string $contentType The value for the Content-Type header. Check self::contentTypes['createShipment'] to see the possible values for this operation
     *
     * @throws \InvalidArgumentException
     * @return \GuzzleHttp\Promise\PromiseInterface
     */
    public function createShipmentAsyncWithHttpInfo($body, string $contentType = self::contentTypes['createShipment'][0])
    {
        $returnType = '\kruegge82\jumingo\Model\CreateShipmentResult';
        $request = $this->createShipmentRequest($body, $contentType);

        return $this->client
            ->sendAsync($request, $this->createHttpClientOption())
            ->then(
                function ($response) use ($returnType) {
                    if ($returnType === '\SplFileObject') {
                        $content = $response->getBody(); //stream goes to serializer
                    } else {
                        $content = (string) $response->getBody();
                        if ($returnType !== 'string') {
                            $content = json_decode($content);
                        }
                    }

                    return [
                        ObjectSerializer::deserialize($content, $returnType, []),
                        $response->getStatusCode(),
                        $response->getHeaders()
                    ];
                },
                function ($exception) {
                    $response = $exception->getResponse();
                    $statusCode = $response->getStatusCode();
                    throw new ApiException(
                        sprintf(
                            '[%d] Error connecting to the API (%s)',
                            $statusCode,
                            $exception->getRequest()->getUri()
                        ),
                        $statusCode,
                        $response->getHeaders(),
                        (string) $response->getBody()
                    );
                }
            );
    }

    /**
     * Create request for operation 'createShipment'
     *
     * @param  \kruegge82\jumingo\Model\CreateShipment $body (required)
     * @param  string $contentType The value for the Content-Type header. Check self::contentTypes['createShipment'] to see the possible values for this operation
     *
     * @throws \InvalidArgumentException
     * @return \GuzzleHttp\Psr7\Request
     */
    public function createShipmentRequest($body, string $contentType = self::contentTypes['createShipment'][0])
    {

        // verify the required parameter 'body' is set
        if ($body === null || (is_array($body) && count($body) === 0)) {
            throw new \InvalidArgumentException(
                'Missing the required parameter $body when calling createShipment'
            );
        }


        $resourcePath = '/v1/shipments';
        $formParams = [];
        $queryParams = [];
        $headerParams = [];
        $httpBody = '';
        $multipart = false;





        $headers = $this->headerSelector->selectHeaders(
            ['application/json', ],
            $contentType,
            $multipart
        );

        // for model (json/xml)
        if (isset($body)) {
            if (stripos($headers['Content-Type'], 'application/json') !== false) {
                # if Content-Type contains "application/json", json_encode the body
                $httpBody = \GuzzleHttp\Utils::jsonEncode(ObjectSerializer::sanitizeForSerialization($body));
            } else {
                $httpBody = $body;
            }
        } elseif (count($formParams) > 0) {
            if ($multipart) {
                $multipartContents = [];
                foreach ($formParams as $formParamName => $formParamValue) {
                    $formParamValueItems = is_array($formParamValue) ? $formParamValue : [$formParamValue];
                    foreach ($formParamValueItems as $formParamValueItem) {
                        $multipartContents[] = [
                            'name' => $formParamName,
                            'contents' => $formParamValueItem
                        ];
                    }
                }
                // for HTTP post (form)
                $httpBody = new MultipartStream($multipartContents);

            } elseif (stripos($headers['Content-Type'], 'application/json') !== false) {
                # if Content-Type contains "application/json", json_encode the form parameters
                $httpBody = \GuzzleHttp\Utils::jsonEncode($formParams);
            } else {
                // for HTTP post (form)
                $httpBody = ObjectSerializer::buildQuery($formParams);
            }
        }

        // this endpoint requires API key authentication
        $apiKey = $this->config->getApiKeyWithPrefix('X-AUTH-TOKEN');
        if ($apiKey !== null) {
            $headers['X-AUTH-TOKEN'] = $apiKey;
        }

        $defaultHeaders = [];
        if ($this->config->getUserAgent()) {
            $defaultHeaders['User-Agent'] = $this->config->getUserAgent();
        }

        $headers = array_merge(
            $defaultHeaders,
            $headerParams,
            $headers
        );

        $operationHost = $this->config->getHost();
        $query = ObjectSerializer::buildQuery($queryParams);
        return new Request(
            'POST',
            $operationHost . $resourcePath . ($query ? "?{$query}" : ''),
            $headers,
            $httpBody
        );
    }

    /**
     * Operation deleteShipment
     *
     * Removes the Shipment resource.
     *
     * @param  string $shipment_id shipment_id (required)
     * @param  string $contentType The value for the Content-Type header. Check self::contentTypes['deleteShipment'] to see the possible values for this operation
     *
     * @throws \kruegge82\jumingo\ApiException on non-2xx response or if the response body is not in the expected format
     * @throws \InvalidArgumentException
     * @return void
     */
    public function deleteShipment($shipment_id, string $contentType = self::contentTypes['deleteShipment'][0])
    {
        $this->deleteShipmentWithHttpInfo($shipment_id, $contentType);
    }

    /**
     * Operation deleteShipmentWithHttpInfo
     *
     * Removes the Shipment resource.
     *
     * @param  string $shipment_id (required)
     * @param  string $contentType The value for the Content-Type header. Check self::contentTypes['deleteShipment'] to see the possible values for this operation
     *
     * @throws \kruegge82\jumingo\ApiException on non-2xx response or if the response body is not in the expected format
     * @throws \InvalidArgumentException
     * @return array of null, HTTP status code, HTTP response headers (array of strings)
     */
    public function deleteShipmentWithHttpInfo($shipment_id, string $contentType = self::contentTypes['deleteShipment'][0])
    {
        $request = $this->deleteShipmentRequest($shipment_id, $contentType);

        try {
            $options = $this->createHttpClientOption();
            try {
                $response = $this->client->send($request, $options);
            } catch (RequestException $e) {
                throw new ApiException(
                    "[{$e->getCode()}] {$e->getMessage()}",
                    (int) $e->getCode(),
                    $e->getResponse() ? $e->getResponse()->getHeaders() : null,
                    $e->getResponse() ? (string) $e->getResponse()->getBody() : null
                );
            } catch (ConnectException $e) {
                throw new ApiException(
                    "[{$e->getCode()}] {$e->getMessage()}",
                    (int) $e->getCode(),
                    null,
                    null
                );
            }

            $statusCode = $response->getStatusCode();


            return [null, $statusCode, $response->getHeaders()];
        } catch (ApiException $e) {
            switch ($e->getCode()) {
                case 404:
                    $data = ObjectSerializer::deserialize(
                        $e->getResponseBody(),
                        '\kruegge82\jumingo\Model\Exception',
                        $e->getResponseHeaders()
                    );
                    $e->setResponseObject($data);
                    throw $e;
            }
        

            throw $e;
        }
    }

    /**
     * Operation deleteShipmentAsync
     *
     * Removes the Shipment resource.
     *
     * @param  string $shipment_id (required)
     * @param  string $contentType The value for the Content-Type header. Check self::contentTypes['deleteShipment'] to see the possible values for this operation
     *
     * @throws \InvalidArgumentException
     * @return \GuzzleHttp\Promise\PromiseInterface
     */
    public function deleteShipmentAsync($shipment_id, string $contentType = self::contentTypes['deleteShipment'][0])
    {
        return $this->deleteShipmentAsyncWithHttpInfo($shipment_id, $contentType)
            ->then(
                function ($response) {
                    return $response[0];
                }
            );
    }

    /**
     * Operation deleteShipmentAsyncWithHttpInfo
     *
     * Removes the Shipment resource.
     *
     * @param  string $shipment_id (required)
     * @param  string $contentType The value for the Content-Type header. Check self::contentTypes['deleteShipment'] to see the possible values for this operation
     *
     * @throws \InvalidArgumentException
     * @return \GuzzleHttp\Promise\PromiseInterface
     */
    public function deleteShipmentAsyncWithHttpInfo($shipment_id, string $contentType = self::contentTypes['deleteShipment'][0])
    {
        $returnType = '';
        $request = $this->deleteShipmentRequest($shipment_id, $contentType);

        return $this->client
            ->sendAsync($request, $this->createHttpClientOption())
            ->then(
                function ($response) use ($returnType) {
                    return [null, $response->getStatusCode(), $response->getHeaders()];
                },
                function ($exception) {
                    $response = $exception->getResponse();
                    $statusCode = $response->getStatusCode();
                    throw new ApiException(
                        sprintf(
                            '[%d] Error connecting to the API (%s)',
                            $statusCode,
                            $exception->getRequest()->getUri()
                        ),
                        $statusCode,
                        $response->getHeaders(),
                        (string) $response->getBody()
                    );
                }
            );
    }

    /**
     * Create request for operation 'deleteShipment'
     *
     * @param  string $shipment_id (required)
     * @param  string $contentType The value for the Content-Type header. Check self::contentTypes['deleteShipment'] to see the possible values for this operation
     *
     * @throws \InvalidArgumentException
     * @return \GuzzleHttp\Psr7\Request
     */
    public function deleteShipmentRequest($shipment_id, string $contentType = self::contentTypes['deleteShipment'][0])
    {

        // verify the required parameter 'shipment_id' is set
        if ($shipment_id === null || (is_array($shipment_id) && count($shipment_id) === 0)) {
            throw new \InvalidArgumentException(
                'Missing the required parameter $shipment_id when calling deleteShipment'
            );
        }


        $resourcePath = '/v1/shipments/{shipment_id}';
        $formParams = [];
        $queryParams = [];
        $headerParams = [];
        $httpBody = '';
        $multipart = false;



        // path params
        if ($shipment_id !== null) {
            $resourcePath = str_replace(
                '{' . 'shipment_id' . '}',
                ObjectSerializer::toPathValue($shipment_id),
                $resourcePath
            );
        }


        $headers = $this->headerSelector->selectHeaders(
            ['application/json', ],
            $contentType,
            $multipart
        );

        // for model (json/xml)
        if (count($formParams) > 0) {
            if ($multipart) {
                $multipartContents = [];
                foreach ($formParams as $formParamName => $formParamValue) {
                    $formParamValueItems = is_array($formParamValue) ? $formParamValue : [$formParamValue];
                    foreach ($formParamValueItems as $formParamValueItem) {
                        $multipartContents[] = [
                            'name' => $formParamName,
                            'contents' => $formParamValueItem
                        ];
                    }
                }
                // for HTTP post (form)
                $httpBody = new MultipartStream($multipartContents);

            } elseif (stripos($headers['Content-Type'], 'application/json') !== false) {
                # if Content-Type contains "application/json", json_encode the form parameters
                $httpBody = \GuzzleHttp\Utils::jsonEncode($formParams);
            } else {
                // for HTTP post (form)
                $httpBody = ObjectSerializer::buildQuery($formParams);
            }
        }

        // this endpoint requires API key authentication
        $apiKey = $this->config->getApiKeyWithPrefix('X-AUTH-TOKEN');
        if ($apiKey !== null) {
            $headers['X-AUTH-TOKEN'] = $apiKey;
        }

        $defaultHeaders = [];
        if ($this->config->getUserAgent()) {
            $defaultHeaders['User-Agent'] = $this->config->getUserAgent();
        }

        $headers = array_merge(
            $defaultHeaders,
            $headerParams,
            $headers
        );

        $operationHost = $this->config->getHost();
        $query = ObjectSerializer::buildQuery($queryParams);
        return new Request(
            'DELETE',
            $operationHost . $resourcePath . ($query ? "?{$query}" : ''),
            $headers,
            $httpBody
        );
    }

    /**
     * Operation deleteShipmentFile
     *
     * Deletes a commercial invoice or an export declaration for a shipment
     *
     * @param  string $uuid The shipment uuid. E.g. s_fbf8e2a57185478194fa264583b5b388 (required)
     * @param  string $type The document type for the shipment to be deleted. E.g. &lt;b&gt;commercial-invoice&lt;/b&gt; or &lt;b&gt;export-declaration&lt;/b&gt; (required)
     * @param  string $contentType The value for the Content-Type header. Check self::contentTypes['deleteShipmentFile'] to see the possible values for this operation
     *
     * @throws \kruegge82\jumingo\ApiException on non-2xx response or if the response body is not in the expected format
     * @throws \InvalidArgumentException
     * @return void
     */
    public function deleteShipmentFile($uuid, $type, string $contentType = self::contentTypes['deleteShipmentFile'][0])
    {
        $this->deleteShipmentFileWithHttpInfo($uuid, $type, $contentType);
    }

    /**
     * Operation deleteShipmentFileWithHttpInfo
     *
     * Deletes a commercial invoice or an export declaration for a shipment
     *
     * @param  string $uuid The shipment uuid. E.g. s_fbf8e2a57185478194fa264583b5b388 (required)
     * @param  string $type The document type for the shipment to be deleted. E.g. &lt;b&gt;commercial-invoice&lt;/b&gt; or &lt;b&gt;export-declaration&lt;/b&gt; (required)
     * @param  string $contentType The value for the Content-Type header. Check self::contentTypes['deleteShipmentFile'] to see the possible values for this operation
     *
     * @throws \kruegge82\jumingo\ApiException on non-2xx response or if the response body is not in the expected format
     * @throws \InvalidArgumentException
     * @return array of null, HTTP status code, HTTP response headers (array of strings)
     */
    public function deleteShipmentFileWithHttpInfo($uuid, $type, string $contentType = self::contentTypes['deleteShipmentFile'][0])
    {
        $request = $this->deleteShipmentFileRequest($uuid, $type, $contentType);

        try {
            $options = $this->createHttpClientOption();
            try {
                $response = $this->client->send($request, $options);
            } catch (RequestException $e) {
                throw new ApiException(
                    "[{$e->getCode()}] {$e->getMessage()}",
                    (int) $e->getCode(),
                    $e->getResponse() ? $e->getResponse()->getHeaders() : null,
                    $e->getResponse() ? (string) $e->getResponse()->getBody() : null
                );
            } catch (ConnectException $e) {
                throw new ApiException(
                    "[{$e->getCode()}] {$e->getMessage()}",
                    (int) $e->getCode(),
                    null,
                    null
                );
            }

            $statusCode = $response->getStatusCode();


            return [null, $statusCode, $response->getHeaders()];
        } catch (ApiException $e) {
            switch ($e->getCode()) {
                case 400:
                    $data = ObjectSerializer::deserialize(
                        $e->getResponseBody(),
                        '\kruegge82\jumingo\Model\Exception',
                        $e->getResponseHeaders()
                    );
                    $e->setResponseObject($data);
                    throw $e;
            }
        

            throw $e;
        }
    }

    /**
     * Operation deleteShipmentFileAsync
     *
     * Deletes a commercial invoice or an export declaration for a shipment
     *
     * @param  string $uuid The shipment uuid. E.g. s_fbf8e2a57185478194fa264583b5b388 (required)
     * @param  string $type The document type for the shipment to be deleted. E.g. &lt;b&gt;commercial-invoice&lt;/b&gt; or &lt;b&gt;export-declaration&lt;/b&gt; (required)
     * @param  string $contentType The value for the Content-Type header. Check self::contentTypes['deleteShipmentFile'] to see the possible values for this operation
     *
     * @throws \InvalidArgumentException
     * @return \GuzzleHttp\Promise\PromiseInterface
     */
    public function deleteShipmentFileAsync($uuid, $type, string $contentType = self::contentTypes['deleteShipmentFile'][0])
    {
        return $this->deleteShipmentFileAsyncWithHttpInfo($uuid, $type, $contentType)
            ->then(
                function ($response) {
                    return $response[0];
                }
            );
    }

    /**
     * Operation deleteShipmentFileAsyncWithHttpInfo
     *
     * Deletes a commercial invoice or an export declaration for a shipment
     *
     * @param  string $uuid The shipment uuid. E.g. s_fbf8e2a57185478194fa264583b5b388 (required)
     * @param  string $type The document type for the shipment to be deleted. E.g. &lt;b&gt;commercial-invoice&lt;/b&gt; or &lt;b&gt;export-declaration&lt;/b&gt; (required)
     * @param  string $contentType The value for the Content-Type header. Check self::contentTypes['deleteShipmentFile'] to see the possible values for this operation
     *
     * @throws \InvalidArgumentException
     * @return \GuzzleHttp\Promise\PromiseInterface
     */
    public function deleteShipmentFileAsyncWithHttpInfo($uuid, $type, string $contentType = self::contentTypes['deleteShipmentFile'][0])
    {
        $returnType = '';
        $request = $this->deleteShipmentFileRequest($uuid, $type, $contentType);

        return $this->client
            ->sendAsync($request, $this->createHttpClientOption())
            ->then(
                function ($response) use ($returnType) {
                    return [null, $response->getStatusCode(), $response->getHeaders()];
                },
                function ($exception) {
                    $response = $exception->getResponse();
                    $statusCode = $response->getStatusCode();
                    throw new ApiException(
                        sprintf(
                            '[%d] Error connecting to the API (%s)',
                            $statusCode,
                            $exception->getRequest()->getUri()
                        ),
                        $statusCode,
                        $response->getHeaders(),
                        (string) $response->getBody()
                    );
                }
            );
    }

    /**
     * Create request for operation 'deleteShipmentFile'
     *
     * @param  string $uuid The shipment uuid. E.g. s_fbf8e2a57185478194fa264583b5b388 (required)
     * @param  string $type The document type for the shipment to be deleted. E.g. &lt;b&gt;commercial-invoice&lt;/b&gt; or &lt;b&gt;export-declaration&lt;/b&gt; (required)
     * @param  string $contentType The value for the Content-Type header. Check self::contentTypes['deleteShipmentFile'] to see the possible values for this operation
     *
     * @throws \InvalidArgumentException
     * @return \GuzzleHttp\Psr7\Request
     */
    public function deleteShipmentFileRequest($uuid, $type, string $contentType = self::contentTypes['deleteShipmentFile'][0])
    {

        // verify the required parameter 'uuid' is set
        if ($uuid === null || (is_array($uuid) && count($uuid) === 0)) {
            throw new \InvalidArgumentException(
                'Missing the required parameter $uuid when calling deleteShipmentFile'
            );
        }

        // verify the required parameter 'type' is set
        if ($type === null || (is_array($type) && count($type) === 0)) {
            throw new \InvalidArgumentException(
                'Missing the required parameter $type when calling deleteShipmentFile'
            );
        }


        $resourcePath = '/v1/shipments/{uuid}/file/upload/{type}';
        $formParams = [];
        $queryParams = [];
        $headerParams = [];
        $httpBody = '';
        $multipart = false;



        // path params
        if ($uuid !== null) {
            $resourcePath = str_replace(
                '{' . 'uuid' . '}',
                ObjectSerializer::toPathValue($uuid),
                $resourcePath
            );
        }
        // path params
        if ($type !== null) {
            $resourcePath = str_replace(
                '{' . 'type' . '}',
                ObjectSerializer::toPathValue($type),
                $resourcePath
            );
        }


        $headers = $this->headerSelector->selectHeaders(
            ['application/json', ],
            $contentType,
            $multipart
        );

        // for model (json/xml)
        if (count($formParams) > 0) {
            if ($multipart) {
                $multipartContents = [];
                foreach ($formParams as $formParamName => $formParamValue) {
                    $formParamValueItems = is_array($formParamValue) ? $formParamValue : [$formParamValue];
                    foreach ($formParamValueItems as $formParamValueItem) {
                        $multipartContents[] = [
                            'name' => $formParamName,
                            'contents' => $formParamValueItem
                        ];
                    }
                }
                // for HTTP post (form)
                $httpBody = new MultipartStream($multipartContents);

            } elseif (stripos($headers['Content-Type'], 'application/json') !== false) {
                # if Content-Type contains "application/json", json_encode the form parameters
                $httpBody = \GuzzleHttp\Utils::jsonEncode($formParams);
            } else {
                // for HTTP post (form)
                $httpBody = ObjectSerializer::buildQuery($formParams);
            }
        }

        // this endpoint requires API key authentication
        $apiKey = $this->config->getApiKeyWithPrefix('X-AUTH-TOKEN');
        if ($apiKey !== null) {
            $headers['X-AUTH-TOKEN'] = $apiKey;
        }

        $defaultHeaders = [];
        if ($this->config->getUserAgent()) {
            $defaultHeaders['User-Agent'] = $this->config->getUserAgent();
        }

        $headers = array_merge(
            $defaultHeaders,
            $headerParams,
            $headers
        );

        $operationHost = $this->config->getHost();
        $query = ObjectSerializer::buildQuery($queryParams);
        return new Request(
            'DELETE',
            $operationHost . $resourcePath . ($query ? "?{$query}" : ''),
            $headers,
            $httpBody
        );
    }

    /**
     * Operation getShipment
     *
     * Retrieve a Shipment
     *
     * @param  string $shipment_id shipment_id (required)
     * @param  string $contentType The value for the Content-Type header. Check self::contentTypes['getShipment'] to see the possible values for this operation
     *
     * @throws \kruegge82\jumingo\ApiException on non-2xx response or if the response body is not in the expected format
     * @throws \InvalidArgumentException
     * @return \kruegge82\jumingo\Model\Shipment|\kruegge82\jumingo\Model\ErrorResponse
     */
    public function getShipment($shipment_id, string $contentType = self::contentTypes['getShipment'][0])
    {
        list($response) = $this->getShipmentWithHttpInfo($shipment_id, $contentType);
        return $response;
    }

    /**
     * Operation getShipmentWithHttpInfo
     *
     * Retrieve a Shipment
     *
     * @param  string $shipment_id (required)
     * @param  string $contentType The value for the Content-Type header. Check self::contentTypes['getShipment'] to see the possible values for this operation
     *
     * @throws \kruegge82\jumingo\ApiException on non-2xx response or if the response body is not in the expected format
     * @throws \InvalidArgumentException
     * @return array of \kruegge82\jumingo\Model\Shipment|\kruegge82\jumingo\Model\ErrorResponse, HTTP status code, HTTP response headers (array of strings)
     */
    public function getShipmentWithHttpInfo($shipment_id, string $contentType = self::contentTypes['getShipment'][0])
    {
        $request = $this->getShipmentRequest($shipment_id, $contentType);

        try {
            $options = $this->createHttpClientOption();
            try {
                $response = $this->client->send($request, $options);
            } catch (RequestException $e) {
                throw new ApiException(
                    "[{$e->getCode()}] {$e->getMessage()}",
                    (int) $e->getCode(),
                    $e->getResponse() ? $e->getResponse()->getHeaders() : null,
                    $e->getResponse() ? (string) $e->getResponse()->getBody() : null
                );
            } catch (ConnectException $e) {
                throw new ApiException(
                    "[{$e->getCode()}] {$e->getMessage()}",
                    (int) $e->getCode(),
                    null,
                    null
                );
            }

            $statusCode = $response->getStatusCode();


            switch($statusCode) {
                case 200:
                    return $this->handleResponseWithDataType(
                        '\kruegge82\jumingo\Model\Shipment',
                        $request,
                        $response,
                    );
                case 400:
                    return $this->handleResponseWithDataType(
                        '\kruegge82\jumingo\Model\ErrorResponse',
                        $request,
                        $response,
                    );
            }

            

            if ($statusCode < 200 || $statusCode > 299) {
                throw new ApiException(
                    sprintf(
                        '[%d] Error connecting to the API (%s)',
                        $statusCode,
                        (string) $request->getUri()
                    ),
                    $statusCode,
                    $response->getHeaders(),
                    (string) $response->getBody()
                );
            }

            return $this->handleResponseWithDataType(
                '\kruegge82\jumingo\Model\Shipment',
                $request,
                $response,
            );
        } catch (ApiException $e) {
            switch ($e->getCode()) {
                case 200:
                    $data = ObjectSerializer::deserialize(
                        $e->getResponseBody(),
                        '\kruegge82\jumingo\Model\Shipment',
                        $e->getResponseHeaders()
                    );
                    $e->setResponseObject($data);
                    throw $e;
                case 400:
                    $data = ObjectSerializer::deserialize(
                        $e->getResponseBody(),
                        '\kruegge82\jumingo\Model\ErrorResponse',
                        $e->getResponseHeaders()
                    );
                    $e->setResponseObject($data);
                    throw $e;
            }
        

            throw $e;
        }
    }

    /**
     * Operation getShipmentAsync
     *
     * Retrieve a Shipment
     *
     * @param  string $shipment_id (required)
     * @param  string $contentType The value for the Content-Type header. Check self::contentTypes['getShipment'] to see the possible values for this operation
     *
     * @throws \InvalidArgumentException
     * @return \GuzzleHttp\Promise\PromiseInterface
     */
    public function getShipmentAsync($shipment_id, string $contentType = self::contentTypes['getShipment'][0])
    {
        return $this->getShipmentAsyncWithHttpInfo($shipment_id, $contentType)
            ->then(
                function ($response) {
                    return $response[0];
                }
            );
    }

    /**
     * Operation getShipmentAsyncWithHttpInfo
     *
     * Retrieve a Shipment
     *
     * @param  string $shipment_id (required)
     * @param  string $contentType The value for the Content-Type header. Check self::contentTypes['getShipment'] to see the possible values for this operation
     *
     * @throws \InvalidArgumentException
     * @return \GuzzleHttp\Promise\PromiseInterface
     */
    public function getShipmentAsyncWithHttpInfo($shipment_id, string $contentType = self::contentTypes['getShipment'][0])
    {
        $returnType = '\kruegge82\jumingo\Model\Shipment';
        $request = $this->getShipmentRequest($shipment_id, $contentType);

        return $this->client
            ->sendAsync($request, $this->createHttpClientOption())
            ->then(
                function ($response) use ($returnType) {
                    if ($returnType === '\SplFileObject') {
                        $content = $response->getBody(); //stream goes to serializer
                    } else {
                        $content = (string) $response->getBody();
                        if ($returnType !== 'string') {
                            $content = json_decode($content);
                        }
                    }

                    return [
                        ObjectSerializer::deserialize($content, $returnType, []),
                        $response->getStatusCode(),
                        $response->getHeaders()
                    ];
                },
                function ($exception) {
                    $response = $exception->getResponse();
                    $statusCode = $response->getStatusCode();
                    throw new ApiException(
                        sprintf(
                            '[%d] Error connecting to the API (%s)',
                            $statusCode,
                            $exception->getRequest()->getUri()
                        ),
                        $statusCode,
                        $response->getHeaders(),
                        (string) $response->getBody()
                    );
                }
            );
    }

    /**
     * Create request for operation 'getShipment'
     *
     * @param  string $shipment_id (required)
     * @param  string $contentType The value for the Content-Type header. Check self::contentTypes['getShipment'] to see the possible values for this operation
     *
     * @throws \InvalidArgumentException
     * @return \GuzzleHttp\Psr7\Request
     */
    public function getShipmentRequest($shipment_id, string $contentType = self::contentTypes['getShipment'][0])
    {

        // verify the required parameter 'shipment_id' is set
        if ($shipment_id === null || (is_array($shipment_id) && count($shipment_id) === 0)) {
            throw new \InvalidArgumentException(
                'Missing the required parameter $shipment_id when calling getShipment'
            );
        }


        $resourcePath = '/v1/shipments/{shipment_id}';
        $formParams = [];
        $queryParams = [];
        $headerParams = [];
        $httpBody = '';
        $multipart = false;



        // path params
        if ($shipment_id !== null) {
            $resourcePath = str_replace(
                '{' . 'shipment_id' . '}',
                ObjectSerializer::toPathValue($shipment_id),
                $resourcePath
            );
        }


        $headers = $this->headerSelector->selectHeaders(
            ['application/json', ],
            $contentType,
            $multipart
        );

        // for model (json/xml)
        if (count($formParams) > 0) {
            if ($multipart) {
                $multipartContents = [];
                foreach ($formParams as $formParamName => $formParamValue) {
                    $formParamValueItems = is_array($formParamValue) ? $formParamValue : [$formParamValue];
                    foreach ($formParamValueItems as $formParamValueItem) {
                        $multipartContents[] = [
                            'name' => $formParamName,
                            'contents' => $formParamValueItem
                        ];
                    }
                }
                // for HTTP post (form)
                $httpBody = new MultipartStream($multipartContents);

            } elseif (stripos($headers['Content-Type'], 'application/json') !== false) {
                # if Content-Type contains "application/json", json_encode the form parameters
                $httpBody = \GuzzleHttp\Utils::jsonEncode($formParams);
            } else {
                // for HTTP post (form)
                $httpBody = ObjectSerializer::buildQuery($formParams);
            }
        }

        // this endpoint requires API key authentication
        $apiKey = $this->config->getApiKeyWithPrefix('X-AUTH-TOKEN');
        if ($apiKey !== null) {
            $headers['X-AUTH-TOKEN'] = $apiKey;
        }

        $defaultHeaders = [];
        if ($this->config->getUserAgent()) {
            $defaultHeaders['User-Agent'] = $this->config->getUserAgent();
        }

        $headers = array_merge(
            $defaultHeaders,
            $headerParams,
            $headers
        );

        $operationHost = $this->config->getHost();
        $query = ObjectSerializer::buildQuery($queryParams);
        return new Request(
            'GET',
            $operationHost . $resourcePath . ($query ? "?{$query}" : ''),
            $headers,
            $httpBody
        );
    }

    /**
     * Operation getShipments
     *
     * Get Shipments
     *
     * @param  string|null $status Status of shipments (optional, default to 'all')
     * @param  string|null $import_progress_status Import Progress Status of shipments (optional)
     * @param  string|null $created_before Filter by created before the date and/or time. For example: \&quot;2020-09-19T00:00:00.000\&quot; (optional)
     * @param  string|null $created_after Filter by created after the date and/or time.  For example: \&quot;2020-09-19T00:00:00.000\&quot; (optional)
     * @param  string|null $sort_created Sort by created.  For example: \&quot;asc\&quot; (optional)
     * @param  string|null $sort_modified Sort by modified.  For example: \&quot;desc\&quot; (optional)
     * @param  string|null $search Full text search (optional)
     * @param  string|null $order_number Filter shipments by orderNumber (optional)
     * @param  int|null $page The collection page number (optional)
     * @param  int|null $items_per_page The number of items per page (optional)
     * @param  bool|null $pagination Client enable pagination (optional)
     * @param  string $contentType The value for the Content-Type header. Check self::contentTypes['getShipments'] to see the possible values for this operation
     *
     * @throws \kruegge82\jumingo\ApiException on non-2xx response or if the response body is not in the expected format
     * @throws \InvalidArgumentException
     * @return \kruegge82\jumingo\Model\Shipment[]|\kruegge82\jumingo\Model\ErrorResponse
     */
    public function getShipments($status = 'all', $import_progress_status = null, $created_before = null, $created_after = null, $sort_created = null, $sort_modified = null, $search = null, $order_number = null, $page = null, $items_per_page = null, $pagination = null, string $contentType = self::contentTypes['getShipments'][0])
    {
        list($response) = $this->getShipmentsWithHttpInfo($status, $import_progress_status, $created_before, $created_after, $sort_created, $sort_modified, $search, $order_number, $page, $items_per_page, $pagination, $contentType);
        return $response;
    }

    /**
     * Operation getShipmentsWithHttpInfo
     *
     * Get Shipments
     *
     * @param  string|null $status Status of shipments (optional, default to 'all')
     * @param  string|null $import_progress_status Import Progress Status of shipments (optional)
     * @param  string|null $created_before Filter by created before the date and/or time. For example: \&quot;2020-09-19T00:00:00.000\&quot; (optional)
     * @param  string|null $created_after Filter by created after the date and/or time.  For example: \&quot;2020-09-19T00:00:00.000\&quot; (optional)
     * @param  string|null $sort_created Sort by created.  For example: \&quot;asc\&quot; (optional)
     * @param  string|null $sort_modified Sort by modified.  For example: \&quot;desc\&quot; (optional)
     * @param  string|null $search Full text search (optional)
     * @param  string|null $order_number Filter shipments by orderNumber (optional)
     * @param  int|null $page The collection page number (optional)
     * @param  int|null $items_per_page The number of items per page (optional)
     * @param  bool|null $pagination Client enable pagination (optional)
     * @param  string $contentType The value for the Content-Type header. Check self::contentTypes['getShipments'] to see the possible values for this operation
     *
     * @throws \kruegge82\jumingo\ApiException on non-2xx response or if the response body is not in the expected format
     * @throws \InvalidArgumentException
     * @return array of \kruegge82\jumingo\Model\Shipment[]|\kruegge82\jumingo\Model\ErrorResponse, HTTP status code, HTTP response headers (array of strings)
     */
    public function getShipmentsWithHttpInfo($status = 'all', $import_progress_status = null, $created_before = null, $created_after = null, $sort_created = null, $sort_modified = null, $search = null, $order_number = null, $page = null, $items_per_page = null, $pagination = null, string $contentType = self::contentTypes['getShipments'][0])
    {
        $request = $this->getShipmentsRequest($status, $import_progress_status, $created_before, $created_after, $sort_created, $sort_modified, $search, $order_number, $page, $items_per_page, $pagination, $contentType);

        try {
            $options = $this->createHttpClientOption();
            try {
                $response = $this->client->send($request, $options);
            } catch (RequestException $e) {
                throw new ApiException(
                    "[{$e->getCode()}] {$e->getMessage()}",
                    (int) $e->getCode(),
                    $e->getResponse() ? $e->getResponse()->getHeaders() : null,
                    $e->getResponse() ? (string) $e->getResponse()->getBody() : null
                );
            } catch (ConnectException $e) {
                throw new ApiException(
                    "[{$e->getCode()}] {$e->getMessage()}",
                    (int) $e->getCode(),
                    null,
                    null
                );
            }

            $statusCode = $response->getStatusCode();


            switch($statusCode) {
                case 200:
                    return $this->handleResponseWithDataType(
                        '\kruegge82\jumingo\Model\Shipment[]',
                        $request,
                        $response,
                    );
                case 400:
                    return $this->handleResponseWithDataType(
                        '\kruegge82\jumingo\Model\ErrorResponse',
                        $request,
                        $response,
                    );
            }

            

            if ($statusCode < 200 || $statusCode > 299) {
                throw new ApiException(
                    sprintf(
                        '[%d] Error connecting to the API (%s)',
                        $statusCode,
                        (string) $request->getUri()
                    ),
                    $statusCode,
                    $response->getHeaders(),
                    (string) $response->getBody()
                );
            }

            return $this->handleResponseWithDataType(
                '\kruegge82\jumingo\Model\Shipment[]',
                $request,
                $response,
            );
        } catch (ApiException $e) {
            switch ($e->getCode()) {
                case 200:
                    $data = ObjectSerializer::deserialize(
                        $e->getResponseBody(),
                        '\kruegge82\jumingo\Model\Shipment[]',
                        $e->getResponseHeaders()
                    );
                    $e->setResponseObject($data);
                    throw $e;
                case 400:
                    $data = ObjectSerializer::deserialize(
                        $e->getResponseBody(),
                        '\kruegge82\jumingo\Model\ErrorResponse',
                        $e->getResponseHeaders()
                    );
                    $e->setResponseObject($data);
                    throw $e;
            }
        

            throw $e;
        }
    }

    /**
     * Operation getShipmentsAsync
     *
     * Get Shipments
     *
     * @param  string|null $status Status of shipments (optional, default to 'all')
     * @param  string|null $import_progress_status Import Progress Status of shipments (optional)
     * @param  string|null $created_before Filter by created before the date and/or time. For example: \&quot;2020-09-19T00:00:00.000\&quot; (optional)
     * @param  string|null $created_after Filter by created after the date and/or time.  For example: \&quot;2020-09-19T00:00:00.000\&quot; (optional)
     * @param  string|null $sort_created Sort by created.  For example: \&quot;asc\&quot; (optional)
     * @param  string|null $sort_modified Sort by modified.  For example: \&quot;desc\&quot; (optional)
     * @param  string|null $search Full text search (optional)
     * @param  string|null $order_number Filter shipments by orderNumber (optional)
     * @param  int|null $page The collection page number (optional)
     * @param  int|null $items_per_page The number of items per page (optional)
     * @param  bool|null $pagination Client enable pagination (optional)
     * @param  string $contentType The value for the Content-Type header. Check self::contentTypes['getShipments'] to see the possible values for this operation
     *
     * @throws \InvalidArgumentException
     * @return \GuzzleHttp\Promise\PromiseInterface
     */
    public function getShipmentsAsync($status = 'all', $import_progress_status = null, $created_before = null, $created_after = null, $sort_created = null, $sort_modified = null, $search = null, $order_number = null, $page = null, $items_per_page = null, $pagination = null, string $contentType = self::contentTypes['getShipments'][0])
    {
        return $this->getShipmentsAsyncWithHttpInfo($status, $import_progress_status, $created_before, $created_after, $sort_created, $sort_modified, $search, $order_number, $page, $items_per_page, $pagination, $contentType)
            ->then(
                function ($response) {
                    return $response[0];
                }
            );
    }

    /**
     * Operation getShipmentsAsyncWithHttpInfo
     *
     * Get Shipments
     *
     * @param  string|null $status Status of shipments (optional, default to 'all')
     * @param  string|null $import_progress_status Import Progress Status of shipments (optional)
     * @param  string|null $created_before Filter by created before the date and/or time. For example: \&quot;2020-09-19T00:00:00.000\&quot; (optional)
     * @param  string|null $created_after Filter by created after the date and/or time.  For example: \&quot;2020-09-19T00:00:00.000\&quot; (optional)
     * @param  string|null $sort_created Sort by created.  For example: \&quot;asc\&quot; (optional)
     * @param  string|null $sort_modified Sort by modified.  For example: \&quot;desc\&quot; (optional)
     * @param  string|null $search Full text search (optional)
     * @param  string|null $order_number Filter shipments by orderNumber (optional)
     * @param  int|null $page The collection page number (optional)
     * @param  int|null $items_per_page The number of items per page (optional)
     * @param  bool|null $pagination Client enable pagination (optional)
     * @param  string $contentType The value for the Content-Type header. Check self::contentTypes['getShipments'] to see the possible values for this operation
     *
     * @throws \InvalidArgumentException
     * @return \GuzzleHttp\Promise\PromiseInterface
     */
    public function getShipmentsAsyncWithHttpInfo($status = 'all', $import_progress_status = null, $created_before = null, $created_after = null, $sort_created = null, $sort_modified = null, $search = null, $order_number = null, $page = null, $items_per_page = null, $pagination = null, string $contentType = self::contentTypes['getShipments'][0])
    {
        $returnType = '\kruegge82\jumingo\Model\Shipment[]';
        $request = $this->getShipmentsRequest($status, $import_progress_status, $created_before, $created_after, $sort_created, $sort_modified, $search, $order_number, $page, $items_per_page, $pagination, $contentType);

        return $this->client
            ->sendAsync($request, $this->createHttpClientOption())
            ->then(
                function ($response) use ($returnType) {
                    if ($returnType === '\SplFileObject') {
                        $content = $response->getBody(); //stream goes to serializer
                    } else {
                        $content = (string) $response->getBody();
                        if ($returnType !== 'string') {
                            $content = json_decode($content);
                        }
                    }

                    return [
                        ObjectSerializer::deserialize($content, $returnType, []),
                        $response->getStatusCode(),
                        $response->getHeaders()
                    ];
                },
                function ($exception) {
                    $response = $exception->getResponse();
                    $statusCode = $response->getStatusCode();
                    throw new ApiException(
                        sprintf(
                            '[%d] Error connecting to the API (%s)',
                            $statusCode,
                            $exception->getRequest()->getUri()
                        ),
                        $statusCode,
                        $response->getHeaders(),
                        (string) $response->getBody()
                    );
                }
            );
    }

    /**
     * Create request for operation 'getShipments'
     *
     * @param  string|null $status Status of shipments (optional, default to 'all')
     * @param  string|null $import_progress_status Import Progress Status of shipments (optional)
     * @param  string|null $created_before Filter by created before the date and/or time. For example: \&quot;2020-09-19T00:00:00.000\&quot; (optional)
     * @param  string|null $created_after Filter by created after the date and/or time.  For example: \&quot;2020-09-19T00:00:00.000\&quot; (optional)
     * @param  string|null $sort_created Sort by created.  For example: \&quot;asc\&quot; (optional)
     * @param  string|null $sort_modified Sort by modified.  For example: \&quot;desc\&quot; (optional)
     * @param  string|null $search Full text search (optional)
     * @param  string|null $order_number Filter shipments by orderNumber (optional)
     * @param  int|null $page The collection page number (optional)
     * @param  int|null $items_per_page The number of items per page (optional)
     * @param  bool|null $pagination Client enable pagination (optional)
     * @param  string $contentType The value for the Content-Type header. Check self::contentTypes['getShipments'] to see the possible values for this operation
     *
     * @throws \InvalidArgumentException
     * @return \GuzzleHttp\Psr7\Request
     */
    public function getShipmentsRequest($status = 'all', $import_progress_status = null, $created_before = null, $created_after = null, $sort_created = null, $sort_modified = null, $search = null, $order_number = null, $page = null, $items_per_page = null, $pagination = null, string $contentType = self::contentTypes['getShipments'][0])
    {













        $resourcePath = '/v1/shipments';
        $formParams = [];
        $queryParams = [];
        $headerParams = [];
        $httpBody = '';
        $multipart = false;

        // query params
        $queryParams = array_merge($queryParams, ObjectSerializer::toQueryValue(
            $status,
            'status', // param base name
            'string', // openApiType
            '', // style
            false, // explode
            false // required
        ) ?? []);
        // query params
        $queryParams = array_merge($queryParams, ObjectSerializer::toQueryValue(
            $import_progress_status,
            'importProgressStatus', // param base name
            'string', // openApiType
            '', // style
            false, // explode
            false // required
        ) ?? []);
        // query params
        $queryParams = array_merge($queryParams, ObjectSerializer::toQueryValue(
            $created_before,
            'created[before]', // param base name
            'string', // openApiType
            '', // style
            false, // explode
            false // required
        ) ?? []);
        // query params
        $queryParams = array_merge($queryParams, ObjectSerializer::toQueryValue(
            $created_after,
            'created[after]', // param base name
            'string', // openApiType
            '', // style
            false, // explode
            false // required
        ) ?? []);
        // query params
        $queryParams = array_merge($queryParams, ObjectSerializer::toQueryValue(
            $sort_created,
            'sort[created]', // param base name
            'string', // openApiType
            '', // style
            false, // explode
            false // required
        ) ?? []);
        // query params
        $queryParams = array_merge($queryParams, ObjectSerializer::toQueryValue(
            $sort_modified,
            'sort[modified]', // param base name
            'string', // openApiType
            '', // style
            false, // explode
            false // required
        ) ?? []);
        // query params
        $queryParams = array_merge($queryParams, ObjectSerializer::toQueryValue(
            $search,
            'search', // param base name
            'string', // openApiType
            '', // style
            false, // explode
            false // required
        ) ?? []);
        // query params
        $queryParams = array_merge($queryParams, ObjectSerializer::toQueryValue(
            $order_number,
            'orderNumber', // param base name
            'string', // openApiType
            '', // style
            false, // explode
            false // required
        ) ?? []);
        // query params
        $queryParams = array_merge($queryParams, ObjectSerializer::toQueryValue(
            $page,
            'page', // param base name
            'integer', // openApiType
            '', // style
            false, // explode
            false // required
        ) ?? []);
        // query params
        $queryParams = array_merge($queryParams, ObjectSerializer::toQueryValue(
            $items_per_page,
            'itemsPerPage', // param base name
            'integer', // openApiType
            '', // style
            false, // explode
            false // required
        ) ?? []);
        // query params
        $queryParams = array_merge($queryParams, ObjectSerializer::toQueryValue(
            $pagination,
            'pagination', // param base name
            'boolean', // openApiType
            '', // style
            false, // explode
            false // required
        ) ?? []);




        $headers = $this->headerSelector->selectHeaders(
            ['application/json', ],
            $contentType,
            $multipart
        );

        // for model (json/xml)
        if (count($formParams) > 0) {
            if ($multipart) {
                $multipartContents = [];
                foreach ($formParams as $formParamName => $formParamValue) {
                    $formParamValueItems = is_array($formParamValue) ? $formParamValue : [$formParamValue];
                    foreach ($formParamValueItems as $formParamValueItem) {
                        $multipartContents[] = [
                            'name' => $formParamName,
                            'contents' => $formParamValueItem
                        ];
                    }
                }
                // for HTTP post (form)
                $httpBody = new MultipartStream($multipartContents);

            } elseif (stripos($headers['Content-Type'], 'application/json') !== false) {
                # if Content-Type contains "application/json", json_encode the form parameters
                $httpBody = \GuzzleHttp\Utils::jsonEncode($formParams);
            } else {
                // for HTTP post (form)
                $httpBody = ObjectSerializer::buildQuery($formParams);
            }
        }

        // this endpoint requires API key authentication
        $apiKey = $this->config->getApiKeyWithPrefix('X-AUTH-TOKEN');
        if ($apiKey !== null) {
            $headers['X-AUTH-TOKEN'] = $apiKey;
        }

        $defaultHeaders = [];
        if ($this->config->getUserAgent()) {
            $defaultHeaders['User-Agent'] = $this->config->getUserAgent();
        }

        $headers = array_merge(
            $defaultHeaders,
            $headerParams,
            $headers
        );

        $operationHost = $this->config->getHost();
        $query = ObjectSerializer::buildQuery($queryParams);
        return new Request(
            'GET',
            $operationHost . $resourcePath . ($query ? "?{$query}" : ''),
            $headers,
            $httpBody
        );
    }

    /**
     * Operation patchV1ShipmentItem
     *
     * Updates the Shipment resource.
     *
     * @param  string $shipment_id shipment_id (required)
     * @param  \kruegge82\jumingo\Model\CreateShipment|null $shipment The updated Shipment resource (optional)
     * @param  string $contentType The value for the Content-Type header. Check self::contentTypes['patchV1ShipmentItem'] to see the possible values for this operation
     *
     * @throws \kruegge82\jumingo\ApiException on non-2xx response or if the response body is not in the expected format
     * @throws \InvalidArgumentException
     * @return \kruegge82\jumingo\Model\Shipment|\kruegge82\jumingo\Model\Exception|\kruegge82\jumingo\Model\Exception
     */
    public function patchV1ShipmentItem($shipment_id, $shipment = null, string $contentType = self::contentTypes['patchV1ShipmentItem'][0])
    {
        list($response) = $this->patchV1ShipmentItemWithHttpInfo($shipment_id, $shipment, $contentType);
        return $response;
    }

    /**
     * Operation patchV1ShipmentItemWithHttpInfo
     *
     * Updates the Shipment resource.
     *
     * @param  string $shipment_id (required)
     * @param  \kruegge82\jumingo\Model\CreateShipment|null $shipment The updated Shipment resource (optional)
     * @param  string $contentType The value for the Content-Type header. Check self::contentTypes['patchV1ShipmentItem'] to see the possible values for this operation
     *
     * @throws \kruegge82\jumingo\ApiException on non-2xx response or if the response body is not in the expected format
     * @throws \InvalidArgumentException
     * @return array of \kruegge82\jumingo\Model\Shipment|\kruegge82\jumingo\Model\Exception|\kruegge82\jumingo\Model\Exception, HTTP status code, HTTP response headers (array of strings)
     */
    public function patchV1ShipmentItemWithHttpInfo($shipment_id, $shipment = null, string $contentType = self::contentTypes['patchV1ShipmentItem'][0])
    {
        $request = $this->patchV1ShipmentItemRequest($shipment_id, $shipment, $contentType);

        try {
            $options = $this->createHttpClientOption();
            try {
                $response = $this->client->send($request, $options);
            } catch (RequestException $e) {
                throw new ApiException(
                    "[{$e->getCode()}] {$e->getMessage()}",
                    (int) $e->getCode(),
                    $e->getResponse() ? $e->getResponse()->getHeaders() : null,
                    $e->getResponse() ? (string) $e->getResponse()->getBody() : null
                );
            } catch (ConnectException $e) {
                throw new ApiException(
                    "[{$e->getCode()}] {$e->getMessage()}",
                    (int) $e->getCode(),
                    null,
                    null
                );
            }

            $statusCode = $response->getStatusCode();


            switch($statusCode) {
                case 200:
                    return $this->handleResponseWithDataType(
                        '\kruegge82\jumingo\Model\Shipment',
                        $request,
                        $response,
                    );
                case 400:
                    return $this->handleResponseWithDataType(
                        '\kruegge82\jumingo\Model\Exception',
                        $request,
                        $response,
                    );
                case 404:
                    return $this->handleResponseWithDataType(
                        '\kruegge82\jumingo\Model\Exception',
                        $request,
                        $response,
                    );
            }

            

            if ($statusCode < 200 || $statusCode > 299) {
                throw new ApiException(
                    sprintf(
                        '[%d] Error connecting to the API (%s)',
                        $statusCode,
                        (string) $request->getUri()
                    ),
                    $statusCode,
                    $response->getHeaders(),
                    (string) $response->getBody()
                );
            }

            return $this->handleResponseWithDataType(
                '\kruegge82\jumingo\Model\Shipment',
                $request,
                $response,
            );
        } catch (ApiException $e) {
            switch ($e->getCode()) {
                case 200:
                    $data = ObjectSerializer::deserialize(
                        $e->getResponseBody(),
                        '\kruegge82\jumingo\Model\Shipment',
                        $e->getResponseHeaders()
                    );
                    $e->setResponseObject($data);
                    throw $e;
                case 400:
                    $data = ObjectSerializer::deserialize(
                        $e->getResponseBody(),
                        '\kruegge82\jumingo\Model\Exception',
                        $e->getResponseHeaders()
                    );
                    $e->setResponseObject($data);
                    throw $e;
                case 404:
                    $data = ObjectSerializer::deserialize(
                        $e->getResponseBody(),
                        '\kruegge82\jumingo\Model\Exception',
                        $e->getResponseHeaders()
                    );
                    $e->setResponseObject($data);
                    throw $e;
            }
        

            throw $e;
        }
    }

    /**
     * Operation patchV1ShipmentItemAsync
     *
     * Updates the Shipment resource.
     *
     * @param  string $shipment_id (required)
     * @param  \kruegge82\jumingo\Model\CreateShipment|null $shipment The updated Shipment resource (optional)
     * @param  string $contentType The value for the Content-Type header. Check self::contentTypes['patchV1ShipmentItem'] to see the possible values for this operation
     *
     * @throws \InvalidArgumentException
     * @return \GuzzleHttp\Promise\PromiseInterface
     */
    public function patchV1ShipmentItemAsync($shipment_id, $shipment = null, string $contentType = self::contentTypes['patchV1ShipmentItem'][0])
    {
        return $this->patchV1ShipmentItemAsyncWithHttpInfo($shipment_id, $shipment, $contentType)
            ->then(
                function ($response) {
                    return $response[0];
                }
            );
    }

    /**
     * Operation patchV1ShipmentItemAsyncWithHttpInfo
     *
     * Updates the Shipment resource.
     *
     * @param  string $shipment_id (required)
     * @param  \kruegge82\jumingo\Model\CreateShipment|null $shipment The updated Shipment resource (optional)
     * @param  string $contentType The value for the Content-Type header. Check self::contentTypes['patchV1ShipmentItem'] to see the possible values for this operation
     *
     * @throws \InvalidArgumentException
     * @return \GuzzleHttp\Promise\PromiseInterface
     */
    public function patchV1ShipmentItemAsyncWithHttpInfo($shipment_id, $shipment = null, string $contentType = self::contentTypes['patchV1ShipmentItem'][0])
    {
        $returnType = '\kruegge82\jumingo\Model\Shipment';
        $request = $this->patchV1ShipmentItemRequest($shipment_id, $shipment, $contentType);

        return $this->client
            ->sendAsync($request, $this->createHttpClientOption())
            ->then(
                function ($response) use ($returnType) {
                    if ($returnType === '\SplFileObject') {
                        $content = $response->getBody(); //stream goes to serializer
                    } else {
                        $content = (string) $response->getBody();
                        if ($returnType !== 'string') {
                            $content = json_decode($content);
                        }
                    }

                    return [
                        ObjectSerializer::deserialize($content, $returnType, []),
                        $response->getStatusCode(),
                        $response->getHeaders()
                    ];
                },
                function ($exception) {
                    $response = $exception->getResponse();
                    $statusCode = $response->getStatusCode();
                    throw new ApiException(
                        sprintf(
                            '[%d] Error connecting to the API (%s)',
                            $statusCode,
                            $exception->getRequest()->getUri()
                        ),
                        $statusCode,
                        $response->getHeaders(),
                        (string) $response->getBody()
                    );
                }
            );
    }

    /**
     * Create request for operation 'patchV1ShipmentItem'
     *
     * @param  string $shipment_id (required)
     * @param  \kruegge82\jumingo\Model\CreateShipment|null $shipment The updated Shipment resource (optional)
     * @param  string $contentType The value for the Content-Type header. Check self::contentTypes['patchV1ShipmentItem'] to see the possible values for this operation
     *
     * @throws \InvalidArgumentException
     * @return \GuzzleHttp\Psr7\Request
     */
    public function patchV1ShipmentItemRequest($shipment_id, $shipment = null, string $contentType = self::contentTypes['patchV1ShipmentItem'][0])
    {

        // verify the required parameter 'shipment_id' is set
        if ($shipment_id === null || (is_array($shipment_id) && count($shipment_id) === 0)) {
            throw new \InvalidArgumentException(
                'Missing the required parameter $shipment_id when calling patchV1ShipmentItem'
            );
        }



        $resourcePath = '/v1/shipments/{shipment_id}';
        $formParams = [];
        $queryParams = [];
        $headerParams = [];
        $httpBody = '';
        $multipart = false;



        // path params
        if ($shipment_id !== null) {
            $resourcePath = str_replace(
                '{' . 'shipment_id' . '}',
                ObjectSerializer::toPathValue($shipment_id),
                $resourcePath
            );
        }


        $headers = $this->headerSelector->selectHeaders(
            ['application/json', ],
            $contentType,
            $multipart
        );

        // for model (json/xml)
        if (isset($shipment)) {
            if (stripos($headers['Content-Type'], 'application/json') !== false) {
                # if Content-Type contains "application/json", json_encode the body
                $httpBody = \GuzzleHttp\Utils::jsonEncode(ObjectSerializer::sanitizeForSerialization($shipment));
            } else {
                $httpBody = $shipment;
            }
        } elseif (count($formParams) > 0) {
            if ($multipart) {
                $multipartContents = [];
                foreach ($formParams as $formParamName => $formParamValue) {
                    $formParamValueItems = is_array($formParamValue) ? $formParamValue : [$formParamValue];
                    foreach ($formParamValueItems as $formParamValueItem) {
                        $multipartContents[] = [
                            'name' => $formParamName,
                            'contents' => $formParamValueItem
                        ];
                    }
                }
                // for HTTP post (form)
                $httpBody = new MultipartStream($multipartContents);

            } elseif (stripos($headers['Content-Type'], 'application/json') !== false) {
                # if Content-Type contains "application/json", json_encode the form parameters
                $httpBody = \GuzzleHttp\Utils::jsonEncode($formParams);
            } else {
                // for HTTP post (form)
                $httpBody = ObjectSerializer::buildQuery($formParams);
            }
        }

        // this endpoint requires API key authentication
        $apiKey = $this->config->getApiKeyWithPrefix('X-AUTH-TOKEN');
        if ($apiKey !== null) {
            $headers['X-AUTH-TOKEN'] = $apiKey;
        }

        $defaultHeaders = [];
        if ($this->config->getUserAgent()) {
            $defaultHeaders['User-Agent'] = $this->config->getUserAgent();
        }

        $headers = array_merge(
            $defaultHeaders,
            $headerParams,
            $headers
        );

        $operationHost = $this->config->getHost();
        $query = ObjectSerializer::buildQuery($queryParams);
        return new Request(
            'PATCH',
            $operationHost . $resourcePath . ($query ? "?{$query}" : ''),
            $headers,
            $httpBody
        );
    }

    /**
     * Operation putShipment
     *
     * Replaces the Shipment resource.
     *
     * @param  string $shipment_id shipment_id (required)
     * @param  \kruegge82\jumingo\Model\UpdateShipment|null $shipment The updated Shipment resource (optional)
     * @param  string $contentType The value for the Content-Type header. Check self::contentTypes['putShipment'] to see the possible values for this operation
     *
     * @throws \kruegge82\jumingo\ApiException on non-2xx response or if the response body is not in the expected format
     * @throws \InvalidArgumentException
     * @return \kruegge82\jumingo\Model\Shipment|\kruegge82\jumingo\Model\Exception|\kruegge82\jumingo\Model\Exception
     */
    public function putShipment($shipment_id, $shipment = null, string $contentType = self::contentTypes['putShipment'][0])
    {
        list($response) = $this->putShipmentWithHttpInfo($shipment_id, $shipment, $contentType);
        return $response;
    }

    /**
     * Operation putShipmentWithHttpInfo
     *
     * Replaces the Shipment resource.
     *
     * @param  string $shipment_id (required)
     * @param  \kruegge82\jumingo\Model\UpdateShipment|null $shipment The updated Shipment resource (optional)
     * @param  string $contentType The value for the Content-Type header. Check self::contentTypes['putShipment'] to see the possible values for this operation
     *
     * @throws \kruegge82\jumingo\ApiException on non-2xx response or if the response body is not in the expected format
     * @throws \InvalidArgumentException
     * @return array of \kruegge82\jumingo\Model\Shipment|\kruegge82\jumingo\Model\Exception|\kruegge82\jumingo\Model\Exception, HTTP status code, HTTP response headers (array of strings)
     */
    public function putShipmentWithHttpInfo($shipment_id, $shipment = null, string $contentType = self::contentTypes['putShipment'][0])
    {
        $request = $this->putShipmentRequest($shipment_id, $shipment, $contentType);

        try {
            $options = $this->createHttpClientOption();
            try {
                $response = $this->client->send($request, $options);
            } catch (RequestException $e) {
                throw new ApiException(
                    "[{$e->getCode()}] {$e->getMessage()}",
                    (int) $e->getCode(),
                    $e->getResponse() ? $e->getResponse()->getHeaders() : null,
                    $e->getResponse() ? (string) $e->getResponse()->getBody() : null
                );
            } catch (ConnectException $e) {
                throw new ApiException(
                    "[{$e->getCode()}] {$e->getMessage()}",
                    (int) $e->getCode(),
                    null,
                    null
                );
            }

            $statusCode = $response->getStatusCode();


            switch($statusCode) {
                case 200:
                    return $this->handleResponseWithDataType(
                        '\kruegge82\jumingo\Model\Shipment',
                        $request,
                        $response,
                    );
                case 400:
                    return $this->handleResponseWithDataType(
                        '\kruegge82\jumingo\Model\Exception',
                        $request,
                        $response,
                    );
                case 404:
                    return $this->handleResponseWithDataType(
                        '\kruegge82\jumingo\Model\Exception',
                        $request,
                        $response,
                    );
            }

            

            if ($statusCode < 200 || $statusCode > 299) {
                throw new ApiException(
                    sprintf(
                        '[%d] Error connecting to the API (%s)',
                        $statusCode,
                        (string) $request->getUri()
                    ),
                    $statusCode,
                    $response->getHeaders(),
                    (string) $response->getBody()
                );
            }

            return $this->handleResponseWithDataType(
                '\kruegge82\jumingo\Model\Shipment',
                $request,
                $response,
            );
        } catch (ApiException $e) {
            switch ($e->getCode()) {
                case 200:
                    $data = ObjectSerializer::deserialize(
                        $e->getResponseBody(),
                        '\kruegge82\jumingo\Model\Shipment',
                        $e->getResponseHeaders()
                    );
                    $e->setResponseObject($data);
                    throw $e;
                case 400:
                    $data = ObjectSerializer::deserialize(
                        $e->getResponseBody(),
                        '\kruegge82\jumingo\Model\Exception',
                        $e->getResponseHeaders()
                    );
                    $e->setResponseObject($data);
                    throw $e;
                case 404:
                    $data = ObjectSerializer::deserialize(
                        $e->getResponseBody(),
                        '\kruegge82\jumingo\Model\Exception',
                        $e->getResponseHeaders()
                    );
                    $e->setResponseObject($data);
                    throw $e;
            }
        

            throw $e;
        }
    }

    /**
     * Operation putShipmentAsync
     *
     * Replaces the Shipment resource.
     *
     * @param  string $shipment_id (required)
     * @param  \kruegge82\jumingo\Model\UpdateShipment|null $shipment The updated Shipment resource (optional)
     * @param  string $contentType The value for the Content-Type header. Check self::contentTypes['putShipment'] to see the possible values for this operation
     *
     * @throws \InvalidArgumentException
     * @return \GuzzleHttp\Promise\PromiseInterface
     */
    public function putShipmentAsync($shipment_id, $shipment = null, string $contentType = self::contentTypes['putShipment'][0])
    {
        return $this->putShipmentAsyncWithHttpInfo($shipment_id, $shipment, $contentType)
            ->then(
                function ($response) {
                    return $response[0];
                }
            );
    }

    /**
     * Operation putShipmentAsyncWithHttpInfo
     *
     * Replaces the Shipment resource.
     *
     * @param  string $shipment_id (required)
     * @param  \kruegge82\jumingo\Model\UpdateShipment|null $shipment The updated Shipment resource (optional)
     * @param  string $contentType The value for the Content-Type header. Check self::contentTypes['putShipment'] to see the possible values for this operation
     *
     * @throws \InvalidArgumentException
     * @return \GuzzleHttp\Promise\PromiseInterface
     */
    public function putShipmentAsyncWithHttpInfo($shipment_id, $shipment = null, string $contentType = self::contentTypes['putShipment'][0])
    {
        $returnType = '\kruegge82\jumingo\Model\Shipment';
        $request = $this->putShipmentRequest($shipment_id, $shipment, $contentType);

        return $this->client
            ->sendAsync($request, $this->createHttpClientOption())
            ->then(
                function ($response) use ($returnType) {
                    if ($returnType === '\SplFileObject') {
                        $content = $response->getBody(); //stream goes to serializer
                    } else {
                        $content = (string) $response->getBody();
                        if ($returnType !== 'string') {
                            $content = json_decode($content);
                        }
                    }

                    return [
                        ObjectSerializer::deserialize($content, $returnType, []),
                        $response->getStatusCode(),
                        $response->getHeaders()
                    ];
                },
                function ($exception) {
                    $response = $exception->getResponse();
                    $statusCode = $response->getStatusCode();
                    throw new ApiException(
                        sprintf(
                            '[%d] Error connecting to the API (%s)',
                            $statusCode,
                            $exception->getRequest()->getUri()
                        ),
                        $statusCode,
                        $response->getHeaders(),
                        (string) $response->getBody()
                    );
                }
            );
    }

    /**
     * Create request for operation 'putShipment'
     *
     * @param  string $shipment_id (required)
     * @param  \kruegge82\jumingo\Model\UpdateShipment|null $shipment The updated Shipment resource (optional)
     * @param  string $contentType The value for the Content-Type header. Check self::contentTypes['putShipment'] to see the possible values for this operation
     *
     * @throws \InvalidArgumentException
     * @return \GuzzleHttp\Psr7\Request
     */
    public function putShipmentRequest($shipment_id, $shipment = null, string $contentType = self::contentTypes['putShipment'][0])
    {

        // verify the required parameter 'shipment_id' is set
        if ($shipment_id === null || (is_array($shipment_id) && count($shipment_id) === 0)) {
            throw new \InvalidArgumentException(
                'Missing the required parameter $shipment_id when calling putShipment'
            );
        }



        $resourcePath = '/v1/shipments/{shipment_id}';
        $formParams = [];
        $queryParams = [];
        $headerParams = [];
        $httpBody = '';
        $multipart = false;



        // path params
        if ($shipment_id !== null) {
            $resourcePath = str_replace(
                '{' . 'shipment_id' . '}',
                ObjectSerializer::toPathValue($shipment_id),
                $resourcePath
            );
        }


        $headers = $this->headerSelector->selectHeaders(
            ['application/json', ],
            $contentType,
            $multipart
        );

        // for model (json/xml)
        if (isset($shipment)) {
            if (stripos($headers['Content-Type'], 'application/json') !== false) {
                # if Content-Type contains "application/json", json_encode the body
                $httpBody = \GuzzleHttp\Utils::jsonEncode(ObjectSerializer::sanitizeForSerialization($shipment));
            } else {
                $httpBody = $shipment;
            }
        } elseif (count($formParams) > 0) {
            if ($multipart) {
                $multipartContents = [];
                foreach ($formParams as $formParamName => $formParamValue) {
                    $formParamValueItems = is_array($formParamValue) ? $formParamValue : [$formParamValue];
                    foreach ($formParamValueItems as $formParamValueItem) {
                        $multipartContents[] = [
                            'name' => $formParamName,
                            'contents' => $formParamValueItem
                        ];
                    }
                }
                // for HTTP post (form)
                $httpBody = new MultipartStream($multipartContents);

            } elseif (stripos($headers['Content-Type'], 'application/json') !== false) {
                # if Content-Type contains "application/json", json_encode the form parameters
                $httpBody = \GuzzleHttp\Utils::jsonEncode($formParams);
            } else {
                // for HTTP post (form)
                $httpBody = ObjectSerializer::buildQuery($formParams);
            }
        }

        // this endpoint requires API key authentication
        $apiKey = $this->config->getApiKeyWithPrefix('X-AUTH-TOKEN');
        if ($apiKey !== null) {
            $headers['X-AUTH-TOKEN'] = $apiKey;
        }

        $defaultHeaders = [];
        if ($this->config->getUserAgent()) {
            $defaultHeaders['User-Agent'] = $this->config->getUserAgent();
        }

        $headers = array_merge(
            $defaultHeaders,
            $headerParams,
            $headers
        );

        $operationHost = $this->config->getHost();
        $query = ObjectSerializer::buildQuery($queryParams);
        return new Request(
            'PUT',
            $operationHost . $resourcePath . ($query ? "?{$query}" : ''),
            $headers,
            $httpBody
        );
    }

    /**
     * Operation updateShipmentRateCheapestTariffV1
     *
     * Update shipments rate
     *
     * @param  \kruegge82\jumingo\Model\UpdateShipmentRateCheapestTariffV1Request $shipment The new Shipment resource (required)
     * @param  string|null $shipping_type Rate shipping type (optional)
     * @param  string|null $tariff_type Rate tariff type (optional)
     * @param  string|null $carrier Rate carrier (optional)
     * @param  string|null $sort Results sorting (optional)
     * @param  string $contentType The value for the Content-Type header. Check self::contentTypes['updateShipmentRateCheapestTariffV1'] to see the possible values for this operation
     *
     * @throws \kruegge82\jumingo\ApiException on non-2xx response or if the response body is not in the expected format
     * @throws \InvalidArgumentException
     * @return void
     */
    public function updateShipmentRateCheapestTariffV1($shipment, $shipping_type = null, $tariff_type = null, $carrier = null, $sort = null, string $contentType = self::contentTypes['updateShipmentRateCheapestTariffV1'][0])
    {
        $this->updateShipmentRateCheapestTariffV1WithHttpInfo($shipment, $shipping_type, $tariff_type, $carrier, $sort, $contentType);
    }

    /**
     * Operation updateShipmentRateCheapestTariffV1WithHttpInfo
     *
     * Update shipments rate
     *
     * @param  \kruegge82\jumingo\Model\UpdateShipmentRateCheapestTariffV1Request $shipment The new Shipment resource (required)
     * @param  string|null $shipping_type Rate shipping type (optional)
     * @param  string|null $tariff_type Rate tariff type (optional)
     * @param  string|null $carrier Rate carrier (optional)
     * @param  string|null $sort Results sorting (optional)
     * @param  string $contentType The value for the Content-Type header. Check self::contentTypes['updateShipmentRateCheapestTariffV1'] to see the possible values for this operation
     *
     * @throws \kruegge82\jumingo\ApiException on non-2xx response or if the response body is not in the expected format
     * @throws \InvalidArgumentException
     * @return array of null, HTTP status code, HTTP response headers (array of strings)
     */
    public function updateShipmentRateCheapestTariffV1WithHttpInfo($shipment, $shipping_type = null, $tariff_type = null, $carrier = null, $sort = null, string $contentType = self::contentTypes['updateShipmentRateCheapestTariffV1'][0])
    {
        $request = $this->updateShipmentRateCheapestTariffV1Request($shipment, $shipping_type, $tariff_type, $carrier, $sort, $contentType);

        try {
            $options = $this->createHttpClientOption();
            try {
                $response = $this->client->send($request, $options);
            } catch (RequestException $e) {
                throw new ApiException(
                    "[{$e->getCode()}] {$e->getMessage()}",
                    (int) $e->getCode(),
                    $e->getResponse() ? $e->getResponse()->getHeaders() : null,
                    $e->getResponse() ? (string) $e->getResponse()->getBody() : null
                );
            } catch (ConnectException $e) {
                throw new ApiException(
                    "[{$e->getCode()}] {$e->getMessage()}",
                    (int) $e->getCode(),
                    null,
                    null
                );
            }

            $statusCode = $response->getStatusCode();


            return [null, $statusCode, $response->getHeaders()];
        } catch (ApiException $e) {
            switch ($e->getCode()) {
                case 400:
                    $data = ObjectSerializer::deserialize(
                        $e->getResponseBody(),
                        '\kruegge82\jumingo\Model\Exception',
                        $e->getResponseHeaders()
                    );
                    $e->setResponseObject($data);
                    throw $e;
            }
        

            throw $e;
        }
    }

    /**
     * Operation updateShipmentRateCheapestTariffV1Async
     *
     * Update shipments rate
     *
     * @param  \kruegge82\jumingo\Model\UpdateShipmentRateCheapestTariffV1Request $shipment The new Shipment resource (required)
     * @param  string|null $shipping_type Rate shipping type (optional)
     * @param  string|null $tariff_type Rate tariff type (optional)
     * @param  string|null $carrier Rate carrier (optional)
     * @param  string|null $sort Results sorting (optional)
     * @param  string $contentType The value for the Content-Type header. Check self::contentTypes['updateShipmentRateCheapestTariffV1'] to see the possible values for this operation
     *
     * @throws \InvalidArgumentException
     * @return \GuzzleHttp\Promise\PromiseInterface
     */
    public function updateShipmentRateCheapestTariffV1Async($shipment, $shipping_type = null, $tariff_type = null, $carrier = null, $sort = null, string $contentType = self::contentTypes['updateShipmentRateCheapestTariffV1'][0])
    {
        return $this->updateShipmentRateCheapestTariffV1AsyncWithHttpInfo($shipment, $shipping_type, $tariff_type, $carrier, $sort, $contentType)
            ->then(
                function ($response) {
                    return $response[0];
                }
            );
    }

    /**
     * Operation updateShipmentRateCheapestTariffV1AsyncWithHttpInfo
     *
     * Update shipments rate
     *
     * @param  \kruegge82\jumingo\Model\UpdateShipmentRateCheapestTariffV1Request $shipment The new Shipment resource (required)
     * @param  string|null $shipping_type Rate shipping type (optional)
     * @param  string|null $tariff_type Rate tariff type (optional)
     * @param  string|null $carrier Rate carrier (optional)
     * @param  string|null $sort Results sorting (optional)
     * @param  string $contentType The value for the Content-Type header. Check self::contentTypes['updateShipmentRateCheapestTariffV1'] to see the possible values for this operation
     *
     * @throws \InvalidArgumentException
     * @return \GuzzleHttp\Promise\PromiseInterface
     */
    public function updateShipmentRateCheapestTariffV1AsyncWithHttpInfo($shipment, $shipping_type = null, $tariff_type = null, $carrier = null, $sort = null, string $contentType = self::contentTypes['updateShipmentRateCheapestTariffV1'][0])
    {
        $returnType = '';
        $request = $this->updateShipmentRateCheapestTariffV1Request($shipment, $shipping_type, $tariff_type, $carrier, $sort, $contentType);

        return $this->client
            ->sendAsync($request, $this->createHttpClientOption())
            ->then(
                function ($response) use ($returnType) {
                    return [null, $response->getStatusCode(), $response->getHeaders()];
                },
                function ($exception) {
                    $response = $exception->getResponse();
                    $statusCode = $response->getStatusCode();
                    throw new ApiException(
                        sprintf(
                            '[%d] Error connecting to the API (%s)',
                            $statusCode,
                            $exception->getRequest()->getUri()
                        ),
                        $statusCode,
                        $response->getHeaders(),
                        (string) $response->getBody()
                    );
                }
            );
    }

    /**
     * Create request for operation 'updateShipmentRateCheapestTariffV1'
     *
     * @param  \kruegge82\jumingo\Model\UpdateShipmentRateCheapestTariffV1Request $shipment The new Shipment resource (required)
     * @param  string|null $shipping_type Rate shipping type (optional)
     * @param  string|null $tariff_type Rate tariff type (optional)
     * @param  string|null $carrier Rate carrier (optional)
     * @param  string|null $sort Results sorting (optional)
     * @param  string $contentType The value for the Content-Type header. Check self::contentTypes['updateShipmentRateCheapestTariffV1'] to see the possible values for this operation
     *
     * @throws \InvalidArgumentException
     * @return \GuzzleHttp\Psr7\Request
     */
    public function updateShipmentRateCheapestTariffV1Request($shipment, $shipping_type = null, $tariff_type = null, $carrier = null, $sort = null, string $contentType = self::contentTypes['updateShipmentRateCheapestTariffV1'][0])
    {

        // verify the required parameter 'shipment' is set
        if ($shipment === null || (is_array($shipment) && count($shipment) === 0)) {
            throw new \InvalidArgumentException(
                'Missing the required parameter $shipment when calling updateShipmentRateCheapestTariffV1'
            );
        }






        $resourcePath = '/v1/shipments/cheapest';
        $formParams = [];
        $queryParams = [];
        $headerParams = [];
        $httpBody = '';
        $multipart = false;

        // query params
        $queryParams = array_merge($queryParams, ObjectSerializer::toQueryValue(
            $shipping_type,
            'shippingType', // param base name
            'string', // openApiType
            '', // style
            false, // explode
            false // required
        ) ?? []);
        // query params
        $queryParams = array_merge($queryParams, ObjectSerializer::toQueryValue(
            $tariff_type,
            'tariffType', // param base name
            'string', // openApiType
            '', // style
            false, // explode
            false // required
        ) ?? []);
        // query params
        $queryParams = array_merge($queryParams, ObjectSerializer::toQueryValue(
            $carrier,
            'carrier', // param base name
            'string', // openApiType
            '', // style
            false, // explode
            false // required
        ) ?? []);
        // query params
        $queryParams = array_merge($queryParams, ObjectSerializer::toQueryValue(
            $sort,
            'sort', // param base name
            'string', // openApiType
            '', // style
            false, // explode
            false // required
        ) ?? []);




        $headers = $this->headerSelector->selectHeaders(
            ['application/json', ],
            $contentType,
            $multipart
        );

        // for model (json/xml)
        if (isset($shipment)) {
            if (stripos($headers['Content-Type'], 'application/json') !== false) {
                # if Content-Type contains "application/json", json_encode the body
                $httpBody = \GuzzleHttp\Utils::jsonEncode(ObjectSerializer::sanitizeForSerialization($shipment));
            } else {
                $httpBody = $shipment;
            }
        } elseif (count($formParams) > 0) {
            if ($multipart) {
                $multipartContents = [];
                foreach ($formParams as $formParamName => $formParamValue) {
                    $formParamValueItems = is_array($formParamValue) ? $formParamValue : [$formParamValue];
                    foreach ($formParamValueItems as $formParamValueItem) {
                        $multipartContents[] = [
                            'name' => $formParamName,
                            'contents' => $formParamValueItem
                        ];
                    }
                }
                // for HTTP post (form)
                $httpBody = new MultipartStream($multipartContents);

            } elseif (stripos($headers['Content-Type'], 'application/json') !== false) {
                # if Content-Type contains "application/json", json_encode the form parameters
                $httpBody = \GuzzleHttp\Utils::jsonEncode($formParams);
            } else {
                // for HTTP post (form)
                $httpBody = ObjectSerializer::buildQuery($formParams);
            }
        }

        // this endpoint requires API key authentication
        $apiKey = $this->config->getApiKeyWithPrefix('X-AUTH-TOKEN');
        if ($apiKey !== null) {
            $headers['X-AUTH-TOKEN'] = $apiKey;
        }

        $defaultHeaders = [];
        if ($this->config->getUserAgent()) {
            $defaultHeaders['User-Agent'] = $this->config->getUserAgent();
        }

        $headers = array_merge(
            $defaultHeaders,
            $headerParams,
            $headers
        );

        $operationHost = $this->config->getHost();
        $query = ObjectSerializer::buildQuery($queryParams);
        return new Request(
            'POST',
            $operationHost . $resourcePath . ($query ? "?{$query}" : ''),
            $headers,
            $httpBody
        );
    }

    /**
     * Operation uploadShipmentFile
     *
     * Uploads a commercial invoice or an export declaration for a shipment
     *
     * @param  string $uuid The shipment uuid. E.g. s_fbf8e2a57185478194fa264583b5b388 (required)
     * @param  string $type The document type for the shipment to be uploaded. E.g. &lt;b&gt;commercial-invoice&lt;/b&gt; or &lt;b&gt;export-declaration&lt;/b&gt; (required)
     * @param  \SplFileObject|null $file file (optional)
     * @param  string $contentType The value for the Content-Type header. Check self::contentTypes['uploadShipmentFile'] to see the possible values for this operation
     *
     * @throws \kruegge82\jumingo\ApiException on non-2xx response or if the response body is not in the expected format
     * @throws \InvalidArgumentException
     * @return void
     */
    public function uploadShipmentFile($uuid, $type, $file = null, string $contentType = self::contentTypes['uploadShipmentFile'][0])
    {
        $this->uploadShipmentFileWithHttpInfo($uuid, $type, $file, $contentType);
    }

    /**
     * Operation uploadShipmentFileWithHttpInfo
     *
     * Uploads a commercial invoice or an export declaration for a shipment
     *
     * @param  string $uuid The shipment uuid. E.g. s_fbf8e2a57185478194fa264583b5b388 (required)
     * @param  string $type The document type for the shipment to be uploaded. E.g. &lt;b&gt;commercial-invoice&lt;/b&gt; or &lt;b&gt;export-declaration&lt;/b&gt; (required)
     * @param  \SplFileObject|null $file (optional)
     * @param  string $contentType The value for the Content-Type header. Check self::contentTypes['uploadShipmentFile'] to see the possible values for this operation
     *
     * @throws \kruegge82\jumingo\ApiException on non-2xx response or if the response body is not in the expected format
     * @throws \InvalidArgumentException
     * @return array of null, HTTP status code, HTTP response headers (array of strings)
     */
    public function uploadShipmentFileWithHttpInfo($uuid, $type, $file = null, string $contentType = self::contentTypes['uploadShipmentFile'][0])
    {
        $request = $this->uploadShipmentFileRequest($uuid, $type, $file, $contentType);

        try {
            $options = $this->createHttpClientOption();
            try {
                $response = $this->client->send($request, $options);
            } catch (RequestException $e) {
                throw new ApiException(
                    "[{$e->getCode()}] {$e->getMessage()}",
                    (int) $e->getCode(),
                    $e->getResponse() ? $e->getResponse()->getHeaders() : null,
                    $e->getResponse() ? (string) $e->getResponse()->getBody() : null
                );
            } catch (ConnectException $e) {
                throw new ApiException(
                    "[{$e->getCode()}] {$e->getMessage()}",
                    (int) $e->getCode(),
                    null,
                    null
                );
            }

            $statusCode = $response->getStatusCode();


            return [null, $statusCode, $response->getHeaders()];
        } catch (ApiException $e) {
            switch ($e->getCode()) {
                case 400:
                    $data = ObjectSerializer::deserialize(
                        $e->getResponseBody(),
                        '\kruegge82\jumingo\Model\Exception',
                        $e->getResponseHeaders()
                    );
                    $e->setResponseObject($data);
                    throw $e;
            }
        

            throw $e;
        }
    }

    /**
     * Operation uploadShipmentFileAsync
     *
     * Uploads a commercial invoice or an export declaration for a shipment
     *
     * @param  string $uuid The shipment uuid. E.g. s_fbf8e2a57185478194fa264583b5b388 (required)
     * @param  string $type The document type for the shipment to be uploaded. E.g. &lt;b&gt;commercial-invoice&lt;/b&gt; or &lt;b&gt;export-declaration&lt;/b&gt; (required)
     * @param  \SplFileObject|null $file (optional)
     * @param  string $contentType The value for the Content-Type header. Check self::contentTypes['uploadShipmentFile'] to see the possible values for this operation
     *
     * @throws \InvalidArgumentException
     * @return \GuzzleHttp\Promise\PromiseInterface
     */
    public function uploadShipmentFileAsync($uuid, $type, $file = null, string $contentType = self::contentTypes['uploadShipmentFile'][0])
    {
        return $this->uploadShipmentFileAsyncWithHttpInfo($uuid, $type, $file, $contentType)
            ->then(
                function ($response) {
                    return $response[0];
                }
            );
    }

    /**
     * Operation uploadShipmentFileAsyncWithHttpInfo
     *
     * Uploads a commercial invoice or an export declaration for a shipment
     *
     * @param  string $uuid The shipment uuid. E.g. s_fbf8e2a57185478194fa264583b5b388 (required)
     * @param  string $type The document type for the shipment to be uploaded. E.g. &lt;b&gt;commercial-invoice&lt;/b&gt; or &lt;b&gt;export-declaration&lt;/b&gt; (required)
     * @param  \SplFileObject|null $file (optional)
     * @param  string $contentType The value for the Content-Type header. Check self::contentTypes['uploadShipmentFile'] to see the possible values for this operation
     *
     * @throws \InvalidArgumentException
     * @return \GuzzleHttp\Promise\PromiseInterface
     */
    public function uploadShipmentFileAsyncWithHttpInfo($uuid, $type, $file = null, string $contentType = self::contentTypes['uploadShipmentFile'][0])
    {
        $returnType = '';
        $request = $this->uploadShipmentFileRequest($uuid, $type, $file, $contentType);

        return $this->client
            ->sendAsync($request, $this->createHttpClientOption())
            ->then(
                function ($response) use ($returnType) {
                    return [null, $response->getStatusCode(), $response->getHeaders()];
                },
                function ($exception) {
                    $response = $exception->getResponse();
                    $statusCode = $response->getStatusCode();
                    throw new ApiException(
                        sprintf(
                            '[%d] Error connecting to the API (%s)',
                            $statusCode,
                            $exception->getRequest()->getUri()
                        ),
                        $statusCode,
                        $response->getHeaders(),
                        (string) $response->getBody()
                    );
                }
            );
    }

    /**
     * Create request for operation 'uploadShipmentFile'
     *
     * @param  string $uuid The shipment uuid. E.g. s_fbf8e2a57185478194fa264583b5b388 (required)
     * @param  string $type The document type for the shipment to be uploaded. E.g. &lt;b&gt;commercial-invoice&lt;/b&gt; or &lt;b&gt;export-declaration&lt;/b&gt; (required)
     * @param  \SplFileObject|null $file (optional)
     * @param  string $contentType The value for the Content-Type header. Check self::contentTypes['uploadShipmentFile'] to see the possible values for this operation
     *
     * @throws \InvalidArgumentException
     * @return \GuzzleHttp\Psr7\Request
     */
    public function uploadShipmentFileRequest($uuid, $type, $file = null, string $contentType = self::contentTypes['uploadShipmentFile'][0])
    {

        // verify the required parameter 'uuid' is set
        if ($uuid === null || (is_array($uuid) && count($uuid) === 0)) {
            throw new \InvalidArgumentException(
                'Missing the required parameter $uuid when calling uploadShipmentFile'
            );
        }

        // verify the required parameter 'type' is set
        if ($type === null || (is_array($type) && count($type) === 0)) {
            throw new \InvalidArgumentException(
                'Missing the required parameter $type when calling uploadShipmentFile'
            );
        }



        $resourcePath = '/v1/shipments/{uuid}/file/upload/{type}';
        $formParams = [];
        $queryParams = [];
        $headerParams = [];
        $httpBody = '';
        $multipart = false;



        // path params
        if ($uuid !== null) {
            $resourcePath = str_replace(
                '{' . 'uuid' . '}',
                ObjectSerializer::toPathValue($uuid),
                $resourcePath
            );
        }
        // path params
        if ($type !== null) {
            $resourcePath = str_replace(
                '{' . 'type' . '}',
                ObjectSerializer::toPathValue($type),
                $resourcePath
            );
        }

        // form params
        $formDataProcessor = new FormDataProcessor();

        $formData = $formDataProcessor->prepare([
            'file' => $file,
        ]);

        $formParams = $formDataProcessor->flatten($formData);
        $multipart = $formDataProcessor->has_file;

        $multipart = true;
        $headers = $this->headerSelector->selectHeaders(
            ['application/json', ],
            $contentType,
            $multipart
        );

        // for model (json/xml)
        if (count($formParams) > 0) {
            if ($multipart) {
                $multipartContents = [];
                foreach ($formParams as $formParamName => $formParamValue) {
                    $formParamValueItems = is_array($formParamValue) ? $formParamValue : [$formParamValue];
                    foreach ($formParamValueItems as $formParamValueItem) {
                        $multipartContents[] = [
                            'name' => $formParamName,
                            'contents' => $formParamValueItem
                        ];
                    }
                }
                // for HTTP post (form)
                $httpBody = new MultipartStream($multipartContents);

            } elseif (stripos($headers['Content-Type'], 'application/json') !== false) {
                # if Content-Type contains "application/json", json_encode the form parameters
                $httpBody = \GuzzleHttp\Utils::jsonEncode($formParams);
            } else {
                // for HTTP post (form)
                $httpBody = ObjectSerializer::buildQuery($formParams);
            }
        }

        // this endpoint requires API key authentication
        $apiKey = $this->config->getApiKeyWithPrefix('X-AUTH-TOKEN');
        if ($apiKey !== null) {
            $headers['X-AUTH-TOKEN'] = $apiKey;
        }

        $defaultHeaders = [];
        if ($this->config->getUserAgent()) {
            $defaultHeaders['User-Agent'] = $this->config->getUserAgent();
        }

        $headers = array_merge(
            $defaultHeaders,
            $headerParams,
            $headers
        );

        $operationHost = $this->config->getHost();
        $query = ObjectSerializer::buildQuery($queryParams);
        return new Request(
            'POST',
            $operationHost . $resourcePath . ($query ? "?{$query}" : ''),
            $headers,
            $httpBody
        );
    }

    /**
     * Create http client option
     *
     * @throws \RuntimeException on file opening failure
     * @return array of http client options
     */
    protected function createHttpClientOption()
    {
        $options = [];
        if ($this->config->getDebug()) {
            $options[RequestOptions::DEBUG] = fopen($this->config->getDebugFile(), 'a');
            if (!$options[RequestOptions::DEBUG]) {
                throw new \RuntimeException('Failed to open the debug file: ' . $this->config->getDebugFile());
            }
        }

        if ($this->config->getCertFile()) {
            $options[RequestOptions::CERT] = $this->config->getCertFile();
        }

        if ($this->config->getKeyFile()) {
            $options[RequestOptions::SSL_KEY] = $this->config->getKeyFile();
        }

        return $options;
    }

    private function handleResponseWithDataType(
        string $dataType,
        RequestInterface $request,
        ResponseInterface $response
    ): array {
        if ($dataType === '\SplFileObject') {
            $content = $response->getBody(); //stream goes to serializer
        } else {
            $content = (string) $response->getBody();
            if ($dataType !== 'string') {
                try {
                    $content = json_decode($content, false, 512, JSON_THROW_ON_ERROR);
                } catch (\JsonException $exception) {
                    throw new ApiException(
                        sprintf(
                            'Error JSON decoding server response (%s)',
                            $request->getUri()
                        ),
                        $response->getStatusCode(),
                        $response->getHeaders(),
                        $content
                    );
                }
            }
        }

        return [
            ObjectSerializer::deserialize($content, $dataType, []),
            $response->getStatusCode(),
            $response->getHeaders()
        ];
    }

    private function responseWithinRangeCode(
        string $rangeCode,
        int $statusCode
    ): bool {
        $left = (int) ($rangeCode[0].'00');
        $right = (int) ($rangeCode[0].'99');

        return $statusCode >= $left && $statusCode <= $right;
    }
}
